<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>terminal — github.io</title>
<style>
  /* Page background */
  :root{
    --bg:#060608;
    --panel:#0b0c0f;
    --accent:#39ff14; /* hacker green */
    --accent2: #00ffff; /* NEW: cyan */
    --warn: #ffb800;  /* NEW: amber */
    --muted:#6b737b;
    --glass: rgba(255,255,255,0.03);
  }
  html,body{height:100%;margin:0;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Courier New", monospace;background:
    radial-gradient(1200px 600px at 10% 20%, rgba(57,255,20,0.02), transparent 6%),
    radial-gradient(1000px 400px at 90% 80%, rgba(57,255,20,0.01), transparent 10%),
    var(--bg); color:var(--accent); -webkit-font-smoothing:antialiased;}
  /* Center container */
  .wrap {height:100%;display:flex;align-items:center;justify-content:center;padding:28px;box-sizing:border-box;}
  
  /* --- NEW: Terminal Pulse Effect --- */
  @keyframes term-pulse {
    0% { box-shadow: 0 0 12px rgba(57,255,20,0.1), 0 12px 40px rgba(2,6,8,0.8); }
    50% { box-shadow: 0 0 20px rgba(57,255,20,0.25), 0 12px 40px rgba(2,6,8,0.8); }
    100% { box-shadow: 0 0 12px rgba(57,255,20,0.1), 0 12px 40px rgba(2,6,8,0.8); }
  }
  
  /* Terminal window */
  .term {
    width:min(980px,96vw);
    max-width:980px;
    height:min(640px,86vh);
    background:linear-gradient(180deg,var(--panel), #070708 120%);
    border-radius:10px;
    /* Removed static shadow, replaced with pulse */
    overflow:hidden;
    display:flex;
    flex-direction:column;
    border: 1px solid rgba(57,255,20,0.06);
    animation: term-pulse 4s linear infinite; /* Apply pulse */
  }

  /* Window chrome */
  .chrome {
    display:flex;align-items:center;gap:10px;padding:10px 14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    border-bottom:1px solid rgba(255,255,255,0.02);
  }
  .dots {display:flex;gap:8px;align-items:center;}
  .dot {width:12px;height:12px;border-radius:50%;background:var(--glass);box-shadow:inset 0 -2px 0 rgba(0,0,0,0.6);}
  .dot.close{background:#ff5f56}
  .dot.min{background:#ffbd2e}
  .dot.max{background:#27c93f}
  .title {margin-left:auto;margin-right:auto;color:var(--muted);font-size:13px;letter-spacing:0.6px}

  /* Terminal body */
  .body {
    padding:18px;
    display:flex;
    flex-direction:column;
    gap:8px;
    height:100%;
    box-sizing:border-box;
  }

  /* --- Scanline Effect --- */
  @keyframes scanline-flicker {
    0% { background-position: 0 0; }
    100% { background-position: 0 4px; }
  }
  
  .screen {
    background: linear-gradient(180deg, rgba(0,0,0,0.02), transparent);
    border-radius:6px;
    padding:14px;
    height:100%;
    overflow:auto;
    box-sizing:border-box;
    border:1px solid rgba(57,255,20,0.02);
    position: relative; /* Needed for pseudo-element */
    box-shadow: inset 0 0 40px rgba(0,0,0,0.4); /* CRT Vignette */
  }
  
  /* Scanline Overlay */
  .screen::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(to bottom, rgba(18, 16, 16, 0.1) 50%, transparent 50%);
    background-size: 100% 4px; /* 4px tall lines */
    opacity: 0.3; /* --- Made slightly stronger --- */
    pointer-events: none;
    animation: scanline-flicker 0.1s linear infinite;
  }

  /* --- NEW: Text Glitch Effect --- */
  @keyframes text-glitch {
    0% { transform: skewX(0); }
    49% { transform: skewX(0); }
    50% { transform: skewX(-1deg); }
    51% { transform: skewX(1deg); }
    52% { transform: skewX(0); }
    100% { transform: skewX(0); }
  }

  /* --- NEW: Glowing Flash Effect --- */
  @keyframes glowing-flash {
    0% { color: var(--accent); text-shadow: 0 0 4px var(--accent); }
    50% { color: #fff; text-shadow: 0 0 20px #fff; }
    100% { color: var(--accent); text-shadow: 0 0 4px var(--accent); }
  }
  .flash {
    animation: glowing-flash 0.4s steps(2, start) infinite;
  }

  /* text lines */
  .line {
    white-space:pre-wrap;
    font-size:15px;
    line-height:1.45;
    color:var(--accent);
    text-shadow: 0 0 6px rgba(57,255,20,0.7), 0 0 10px rgba(57,255,20,0.3); /* --- Enhanced glow --- */
    animation: text-glitch 0.2s linear infinite; /* --- Apply glitch --- */
  }
  .muted{
    color:var(--muted);
    font-size:13px;
    text-shadow: none;
    animation: none; /* --- No glitch for muted text --- */
  }
  .error{color:#ff6b6b}
  .success{color:#7bed9f}
  .cyan { color: var(--accent2); text-shadow: 0 0 5px var(--accent2); } /* --- NEW --- */
  .warn { color: var(--warn); text-shadow: 0 0 5px var(--warn); }     /* --- NEW --- */

  /* input */
  .input-wrap {display:flex;align-items:center;gap:8px;margin-top:10px;}
  .prompt{min-width:150px;color:var(--muted);font-size:14px; text-shadow: none; animation: none;}
  .cmdline {
    flex:1;
    background:transparent;
    border:0;
    outline:none;
    color:var(--accent);
    font:inherit;
    font-size:15px;
    caret-color:var(--accent);
    text-shadow: 0 0 6px rgba(57,255,20,0.7);
    animation: text-glitch 0.2s linear infinite;
  }
  /* Hide fake cursor when input is focused */
  .cmdline:focus + .fake-cursor {
    display: none;
  }

  /* fake cursor */
  .fake-cursor{display:inline-block;width:9px;height:18px;background:var(--accent);vertical-align:middle;margin-left:2px;opacity:0.9;animation:blink 1s steps(2,start) infinite;
    box-shadow: 0 0 6px rgba(57,255,20,0.8);
  }
  @keyframes blink{50%{opacity:0}}

  /* hint bar */
  .hint {
    margin-top:10px;padding:9px;border-radius:6px;background:rgba(255,255,255,0.01);color:var(--muted);font-size:13px;display:flex;justify:content:space-between;align:center;gap:12px;
  }
  
  /* Reset button styles for .pill */
  .hint button.pill {
    font:inherit;
    background:transparent;
    border:none;
    padding:0;
    margin:0;
    color:inherit;
  }
  .pill {
    padding:6px 10px;
    border-radius:999px;
    background:rgba(57,255,20,0.04);
    border:1px solid rgba(57,255,20,0.03);
    cursor:pointer;
    color:var(--accent);
    font-size:13px;
    transition: background-color 150ms ease;
    text-shadow: 0 0 4px rgba(57,255,20,0.7);
    animation: text-glitch 0.2s linear infinite;
  }
  /* Add hover/focus for accessibility */
  .pill:hover,
  .pill:focus {
    background:rgba(57,255,20,0.1);
    outline: none;
  }
  .pill:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }

  /* progress */
  .progress {width:100%;height:10px;border-radius:6px;background:rgba(255,255,255,0.02);overflow:hidden;margin-top:8px}
  .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg, rgba(57,255,20,0.16), rgba(57,255,20,0.35));transition:width 400ms linear} /* --- Slower transition --- */

  /* spinner */
  .spinner{width:14px;height:14px;border-radius:50%;border:2px solid rgba(255,255,255,0.06);border-top-color:var(--accent);animation:spin 800ms linear infinite;display:inline-block;vertical-align:middle;margin-right:8px}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* responsive */
  @media (max-width:520px){
    .prompt{min-width:92px;font-size:12px}
    .chrome{padding:8px}
    .title{font-size:12px}
    .line{font-size:14px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <section class="term" aria-label="Fake terminal">
      <div class="chrome" role="toolbar" aria-hidden="true">
        <div class="dots">
          <span class="dot close"></span>
          <span class="dot min"></span>
          <span class="dot max"></span>
        </div>
        <div class="title">github.io — terminal</div>
      </div>

      <div class="body">
        <div id="screen" class="screen" tabindex="0" aria-live="polite">
          <div class="line muted">Welcome to a simulated secure shell.</div>
          <div class="line muted">This interface responds only to <strong>go-to-main</strong>.</div>
          <div class="line muted">Type <strong>go-to-main</strong> and press Enter to continue.</div>
          <div class="line" aria-hidden="true">&nbsp;</div>
        </div>

        <div class="input-wrap">
          <label for="cmd" class="prompt">user@site:~$</label>
          <input id="cmd" class="cmdline" spellcheck="false" autocomplete="off" autocapitalize="off" autocorrect="off" aria-label="Terminal command input" />
          <div class="fake-cursor" id="cursor" aria-hidden="true"></div>
        </div>

        <div class="hint">
          <div class="muted">Only command: <strong>go-to-main</strong></div>
          <button type="button" class="pill" id="runBtn">Run go-to-main ▶</button>
        </div>
      </div>
    </section>
  </div>

<script>
/* ===== Terminal behavior (single-command: go-to-main) ===== */
const screen = document.getElementById('screen');
const cmdInput = document.getElementById('cmd');
const runBtn = document.getElementById('runBtn');
const cursor = document.getElementById('cursor');
let lastCommand = '';
let locked = false; // prevent input while executing

// focus behavior
screen.addEventListener('click', ()=> cmdInput.focus());
cmdInput.focus();

// helper: append a line (with optional class)
function appendLine(text='', cls='line') {
  const d = document.createElement('div');
  d.className = cls || 'line';
  d.textContent = text;
  screen.appendChild(d);
  screen.scrollTop = screen.scrollHeight;
  return d;
}

// small utility to sleep
const sleep = ms => new Promise(r=>setTimeout(r, ms));

// typewriter effect for a line
async function typeLine(node, text, speed=10) {
  node.textContent = '';
  for (const char of text) {
    node.textContent += char;
    screen.scrollTop = screen.scrollHeight;
    await sleep(speed + Math.random() * 6);
  }
}

// --- NEW: ~120 second (2 minute) "techy" boot sequence ---

const kernelLogs = [
  "Booting kernel v6.8.2-arch1-1...",
  "Loading initial ramdisk...",
  "Probing hardware: [CPU, APIC, IO-APIC, MTRR, ACPI]",
  "Initializing memory manager [8.2GiB total]...",
  "Detected CPU: 12th Gen Intel(R) Core(TM) i7-12700H",
  "Mounting virtual filesystems [/dev, /proc, /sys]...",
  "Loading drivers [input, usb, net, block]...",
  "[OK] input: HID driver loaded.",
  "[OK] usb: xhci_hcd driver loaded.",
  "[OK] net: e1000e driver loaded.",
  "Kernel boot complete."
];

const networkLogs = [
  "Initializing network subsystem...",
  "INFO: Interface eth0 detected.", "line cyan",
  "Querying DHCP server...",
  "INFO: Lease obtained: 192.168.1.102", "line cyan",
  "Pinging default gateway [192.168.1.1]... [OK]",
  "Initializing DNS resolver [8.8.8.8, 1.1.1.1]...",
  "WARN: High-latency detected on resolver 8.8.8.8 (120ms).", "line warn",
  "INFO: Switching to secondary resolver 1.1.1.1 (18ms).", "line cyan",
  "Network subsystem OK.",
  "Querying host 'github.io'...",
  "INFO: Host resolved to 2a04:4e42:400::321", "line cyan"
];

const patchLogs = [
  "Applying patch [KB-45a821]...",
  "[OK] Security context initialized.",
  "Applying patch [KB-99b1e0]...",
  "[OK] User session token generated.",
  "Applying patch [CORE-03c4f]...",
  "WARN: Deprecated call in CORE-03c4f. Applying hotfix...", "line warn",
  "[OK] Runtime environment sealed.",
  "Verifying integrity checksums [SHA-256]...",
  "Checksum: a45...7b1 (OK)",
  "Final check... all systems nominal."
];

async function executeGoToMain(invokedCommand) {
  const invoked = invokedCommand || 'go-to-main';
  appendLine(`user@site:~$ ${invoked}`, 'line');
  
  // --- STAGE 1: Initializing (~10 seconds) ---
  const spinnerLine = appendLine('', 'line muted');
  spinnerLine.innerHTML = '<span class="spinner" aria-hidden="true"></span> establishing secure channel...';
  await sleep(2000);
  spinnerLine.innerHTML = '<span class="spinner" aria-hidden="true"></span> authenticating user...';
  await sleep(3000);
  spinnerLine.innerHTML = '<span class="spinner" aria-hidden="true"></span> compiling JIT scripts...';
  await sleep(4000);

  // --- STAGE 2: Kernel & Driver Load (~30 seconds) ---
  spinnerLine.innerHTML = '<span class="spinner" aria-hidden="true"></span> loading kernel...';
  await sleep(1000);
  for (const log of kernelLogs) {
    const n = appendLine('', 'line');
    await typeLine(n, log);
    await sleep(700 + Math.random() * 800);
  }

  // --- STAGE 3: Network Subsystem (~30 seconds) ---
  spinnerLine.innerHTML = '<span class="spinner" aria-hidden="true"></span> initializing network subsystem...';
  await sleep(1000);
  for (let i = 0; i < networkLogs.length; i++) {
    const log = networkLogs[i];
    // Check if the next item is a class name
    let cls = 'line';
    if (i + 1 < networkLogs.length && networkLogs[i+1].startsWith('line ')) {
      cls = networkLogs[i+1];
      i++; // Skip the class name in the next iteration
    }
    const n = appendLine('', cls);
    await typeLine(n, log);
    await sleep(700 + Math.random() * 800);
  }

  // --- STAGE 4: Loading Resources (~30 seconds) ---
  spinnerLine.remove(); // remove "network" spinner
  const progressLine = document.createElement('div');
  progressLine.className = 'line';
  progressLine.innerHTML = '<div class="muted">loading resources...</div><div class="progress" aria-hidden="true"><i></i></div>';
  screen.appendChild(progressLine);
  screen.scrollTop = screen.scrollHeight;
  const bar = progressLine.querySelector('i');

  let pct = 0;
  while(pct < 100){
    const step = Math.floor(2 + Math.random()*4); // smaller steps
    pct = Math.min(100, pct + step);
    bar.style.width = pct + '%';
    await sleep(700 + Math.random()*300); // longer pause
  }

  // --- STAGE 5: Applying Patches (~15 seconds) ---
  progressLine.remove();
  const patchSpinner = appendLine('', 'line muted');
  patchSpinner.innerHTML = '<span class="spinner" aria-hidden="true"></span> applying runtime patches...';
  await sleep(1000);
  
  for (let i = 0; i < patchLogs.length; i++) {
    const log = patchLogs[i];
    let cls = 'line';
    if (i + 1 < patchLogs.length && patchLogs[i+1].startsWith('line ')) {
      cls = patchLogs[i+1];
      i++;
    }
    const n = appendLine('', cls);
    await typeLine(n, log);
    await sleep(700 + Math.random() * 800);
  }
  
  // --- STAGE 6: Final "Flash" & Redirect (~5 seconds) ---
  patchSpinner.remove();
  appendLine('', 'line'); // blank
  
  // --- DRAMATIC FLASH ---
  const breach = appendLine('!!! SECURITY BREACH DETECTED !!!', 'line error flash');
  await sleep(1500);
  breach.textContent = '...false positive. re-routing...';
  breach.classList.remove('flash', 'error');
  breach.classList.add('warn');
  await sleep(1000);
  
  const okLine = appendLine('', 'line muted');
  await typeLine(okLine, 'handshake complete. redirecting to main.html', 12);

  await sleep(1500);
  // actually redirect
  window.location.href = 'main.html';
}

// handle Enter key
cmdInput.addEventListener('keydown', async (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();
    if (locked) return;
    
    const raw = (cmdInput.value || '').trim();
    lastCommand = raw;
    cmdInput.value = '';
    locked = true;

    if (raw.toLowerCase() === 'go-to-main') {
      cmdInput.disabled = true;
      await executeGoToMain(raw);
      // No unlock needed, page will redirect
    } else {
      // Handle "not found"
      appendLine(`user@site:~$ ${raw}`, 'line');
      const nf = appendLine('', 'line error');
      await typeLine(nf, `Command not found: ${raw}`, 12);
      appendLine("Hint: only 'go-to-main' is recognized.", 'line muted');
      
      locked = false;
      cmdInput.focus();
    }
  } else if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
    if (locked) { e.preventDefault(); return; }
    e.preventDefault();
    if (e.key === 'ArrowUp' && lastCommand) cmdInput.value = lastCommand;
    if (e.key === 'ArrowDown') cmdInput.value = '';
  } else if (locked) {
    e.preventDefault();
  }
});

// clickable run button
runBtn.addEventListener('click', async () => {
  if (locked) return;
  cmdInput.value = 'go-to-main';
  cmdInput.focus();
  await sleep(80);
  const ev = new KeyboardEvent('keydown', {'key':'Enter'});
  cmdInput.dispatchEvent(ev);
});

// auto-type "go-to-main" on load
window.addEventListener('load', async () => {
  const demo = 'go-to-main';
  for(let i=0;i<demo.length;i++){
    cmdInput.value += demo[i];
    await sleep(24);
  }
});
</script>
</body>
</html>